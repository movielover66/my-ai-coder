<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Code Fixer Panel</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            margin: 0;
        }
        h2 { color: #61dafb; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; }
        
        textarea {
            width: 100%;
            height: 150px;
            background-color: #2d2d2d;
            color: #fff;
            border: 1px solid #3e3e3e;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
        }
        
        button {
            width: 100%;
            padding: 12px;
            background-color: #0e639c;
            color: white;
            border: none;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover { background-color: #1177bb; }

        .output-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #252526;
            border-left: 5px solid #61dafb;
            display: none; /* Prothome lukan thakbe */
        }
        .label { font-weight: bold; color: #ce9178; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h2>üõ†Ô∏è AI Code Fixer</h2>
    <p>Apnar Script niche paste korun:</p>
    <textarea id="codeInput" placeholder="Example: console.log('hello'"></textarea>
    
    <button onclick="fixCode()">Check & Fix Code</button>

    <div id="resultArea" class="output-box">
        <span class="label">üîé Analysis & Fix:</span>
        <pre id="outputText" style="white-space: pre-wrap;"></pre>
    </div>
</div>

<script type="module">
    // NOTE: Phone-e test korar jonno ekhane API Key use kora hochhe.
    // Real app-e API key server-e rakhte hoy.
    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

    // EKHANE APNAR API KEY DITE HOBE
    const API_KEY = "AIzaSyB9kUksH1uO7UIYSeubhzeUk1Fak3AoaTc"; 

    const genAI = new GoogleGenerativeAI(API_KEY);

    window.fixCode = async function() {
        const inputCode = document.getElementById("codeInput").value;
        const resultArea = document.getElementById("resultArea");
        const outputText = document.getElementById("outputText");
        const btn = document.querySelector("button");

        if(!inputCode) {
            alert("Doya kore kichu code likhun!");
            return;
        }

        btn.innerText = "Checking...";
        
        try {
            const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash"});
            
            const prompt = `You are a strict code reviewer. 
            Analyze this code: "${inputCode}". 
            1. Identify errors (syntax or logic).
            2. Explain why it is wrong.
            3. Provide the corrected code.
            Keep the answer short and clear.`;

            const result = await model.generateContent(prompt);
            const response = await result.response;
            const text = response.text();

            outputText.innerText = text;
            resultArea.style.display = "block";
        } catch (error) {
            outputText.innerText = "Error: API Key check korun ba internet connection dekhun.";
            console.error(error);
            resultArea.style.display = "block";
        }
        
        btn.innerText = "Check & Fix Code";
    }
</script>

</body>
</html>

