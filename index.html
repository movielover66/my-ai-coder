<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Code Fixer & Reviewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            margin: 0;
        }
        h2 { color: #61dafb; text-align: center; }
        .container { max-width: 800px; margin: 0 auto; }
        
        /* File Upload Box Styling */
        .file-upload-wrapper {
            background-color: #2d2d2d;
            border: 2px dashed #3e3e3e;
            padding: 20px;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 15px;
            cursor: pointer;
        }
        .file-upload-wrapper:hover { border-color: #61dafb; }
        input[type="file"] { display: none; }
        .custom-file-upload {
            display: inline-block;
            padding: 6px 12px;
            cursor: pointer;
            color: #61dafb;
            font-weight: bold;
        }

        textarea {
            width: 100%;
            height: 200px;
            background-color: #252526;
            color: #fff;
            border: 1px solid #3e3e3e;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            box-sizing: border-box; /* Fixes width overflow */
        }
        
        button {
            width: 100%;
            padding: 12px;
            background-color: #0e639c;
            color: white;
            border: none;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover { background-color: #1177bb; }

        .output-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #252526;
            border-left: 5px solid #61dafb;
            display: none;
        }
        pre { white-space: pre-wrap; margin: 0; }
    </style>
</head>
<body>

<div class="container">
    <h2>üõ†Ô∏è AI Code Project Reviewer</h2>
    
    <div class="file-upload-wrapper" onclick="document.getElementById('fileInput').click()">
        <label for="fileInput" class="custom-file-upload">
            üìÇ Click to Upload File or ZIP
        </label>
        <div style="font-size: 12px; color: #888;">Supports: .zip, .js, .py, .html, .css</div>
        <input type="file" id="fileInput" accept=".zip,.js,.py,.html,.css,.txt,.json">
    </div>

    <p>Code Preview (AI will read this):</p>
    <textarea id="codeInput" placeholder="Upload a file or paste code here..."></textarea>
    
    <button onclick="fixCode()">Analyze & Fix Code</button>

    <div id="resultArea" class="output-box">
        <span style="font-weight:bold; color:#ce9178">üîé Analysis Result:</span>
        <pre id="outputText">Waiting for AI...</pre>
    </div>
</div>

<script type="module">
    import { API_KEY } from './api.js';

    window.fixCode = async function() {
        const resultArea = document.getElementById("resultArea");
        const outputText = document.getElementById("outputText");
        const btn = document.querySelector("button");

        btn.innerText = "Checking API Status...";
        resultArea.style.display = "block";
        outputText.innerText = "Connecting to Google Servers to find available models...\n";

        try {
            // ‡ßß. ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø Google-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡¶°‡ßá‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Ü‡¶®‡¶æ
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`);
            const data = await response.json();

            if (data.error) {
                outputText.innerText += "\n‚ùå API Error: " + JSON.stringify(data.error, null, 2);
                return;
            }

            // ‡ß®. ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            if (data.models) {
                outputText.innerText += "\n‚úÖ SUCCESS! Your API is working.\n\nAvailable Models for you:";
                
                // ‡¶Æ‡¶°‡ßá‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ
                data.models.forEach(model => {
                    // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶ú‡ßá‡¶Æ‡¶ø‡¶®‡¶ø ‡¶Æ‡¶°‡ßá‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨
                    if(model.name.includes("gemini")) {
                        outputText.innerText += "\nüëâ " + model.name.replace("models/", "");
                    }
                });

                outputText.innerText += "\n\n(‡¶è‡¶ñ‡¶® ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶á ‡¶®‡¶æ‡¶Æ‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡¶¨‡•§ ‡¶è‡¶á ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶¶‡¶ø‡¶®‡•§)";
            } else {
                outputText.innerText += "\n‚ö†Ô∏è No models found in this project.";
            }

        } catch (error) {
            outputText.innerText += "\n‚ùå Network Error: " + error.toString();
        }
        
        btn.innerText = "Check Complete";
    }
</script>
